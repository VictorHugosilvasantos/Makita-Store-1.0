<!DOCTYPE html>
<html lang="pt-br">
<head>
ย <meta charset="UTF-8">
ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย <title>Cadastro de Usuรกrio</title>
  <link rel="icon" href="../imagens/icon1.png" type="image/png">
ย <link rel="stylesheet" href="estilo.css"> 
ย <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

ย <main class="form-signin">
ย ย <form id="formCadastroUsuario">
ย ย ย <img class="mb-4" src="../imagens/logo-tipo.png" alt="Logo" width="72" height="57">
ย ย ย <h1 class="h3 mb-3 fw-normal">Cadastre-se</h1>

ย ย ย <div class="form-floating mb-3">
ย ย ย ย <input type="email" class="form-control" id="floatingInput" placeholder="email@exemplo.com" required>
ย ย ย ย <label for="floatingInput">Email</label>
ย ย ย </div>

ย ย ย <div class="form-floating mb-3">
ย ย ย ย <input type="password" class="form-control" id="floatingPassword" placeholder="Senha" required>
ย ย ย ย <label for="floatingPassword">Senha</label>
ย ย ย </div>

ย ย ย <button class="btn btn-primary w-100 py-2" type="submit">Cadastrar</button>
ย ย ย 
ย ย ย <p class="mt-3 text-body-secondary">
ย ย ย ย Jรก tem conta? <a href="login.html">Faรงa Login</a>
ย ย ย </p>

ย ย ย <p class="mt-5 mb-3 text-body-secondary">&copy; 2024</p>
ย ย </form>
ย </main>

<script>
document.getElementById('formCadastroUsuario').addEventListener('submit', async (e) => {
ย e.preventDefault();

ย const dadosUsuario = {
ย ย email: document.getElementById('floatingInput').value,
ย ย password: document.getElementById('floatingPassword').value
ย };

ย const API_CADASTRO_URL = 'http://localhost:3000/usuarios';

ย try {
ย ย const resposta = await fetch(API_CADASTRO_URL, {
ย ย ย method: 'POST',
ย ย ย headers: { 'Content-Type': 'application/json' },
ย ย ย body: JSON.stringify(dadosUsuario)
ย ย });

ย ย const data = await resposta.json();

ย ย if (resposta.status === 201) {
ย ย ย alert(`โ Cadastro realizado com sucesso! Redirecionando para a pรกgina principal (Home).`);
ย ย ย 
      // ๐ข CORREรรO APLICADA AQUI: Caminho relativo ร raiz do servidor
ย ย ย window.location.href = "../styles/index.html"; 
      
ย ย } else if (resposta.status === 409) {
ย ย ย alert(`โ๏ธ ${data.erro}. Redirecionando para o Login.`);
ย ย ย window.location.href = 'login.html';
ย ย } else {
ย ย ย alert(`โ Erro no cadastro: ${data.erro || 'Erro desconhecido. Verifique o console.'}`);
ย ย }

ย } catch (error) {
ย ย console.error('Falha na comunicaรงรฃo com o servidor:', error);
ย ย alert('โ Falha na conexรฃo. Verifique se o servidor (index.js) estรก rodando na porta 3000.');
ย }
});
</script>


</body>
</html>